{"version":3,"file":"static/js/194.b25a3fc5.chunk.js","mappings":"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","sources":["webpack://react-homework-template/./src/components/reviews/reviews.module.css?dfbc","components/reviews/reviews.js","../node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js","../node_modules/@babel/runtime/helpers/esm/classPrivateFieldLooseBase.js","../node_modules/@babel/runtime/helpers/esm/classPrivateFieldLooseKey.js","services/api-service.js"],"sourcesContent":["// extracted by mini-css-extract-plugin\nexport default {\"box\":\"reviews_box__zfgaK\",\"item\":\"reviews_item__uOsgD\",\"avatar\":\"reviews_avatar__OyJRL\",\"body\":\"reviews_body__okuZv\",\"details\":\"reviews_details__AvIDy\",\"content\":\"reviews_content__mUyX9\"};","import { useEffect, useState } from 'react';\nimport { useSearchParams } from 'react-router-dom';\nimport { apiService } from '../../services/api-service';\n\nimport Loader from '../loader';\n\nimport css from './reviews.module.css';\n\nconst Reviews = () => {\n\n  const [searchParams] = useSearchParams();\n\n  const [reviews, setReviews] = useState([]);\n  const [isLoading, setIsLoading] = useState(false);\n  const [error, setError] = useState(null);\n\n  const movieId = searchParams.get('id');\n\n  useEffect(() => {\n    setIsLoading(true);\n    apiService.getMovieReviews(movieId)\n      .then(res => {\n        setReviews(res);\n      })\n      .catch(err => {\n        setReviews([]);\n        setError(err);\n      })\n      .finally(() => {\n        setIsLoading(false);\n      });\n  }, [movieId]);\n\n  const listReviews = reviews.map(({\n    author,\n    avatar_path,\n    content,\n    created_at,\n    updated_at,\n    url,\n    id\n  }) => (\n    <li key={ id } className={ css.item }>\n      <div className={ css.avatar }>\n        <img src={ avatar_path } alt={ author } />\n      </div>\n      <div className={ css.body }>\n        <h3>{ author }</h3>\n        <p className={ css.details }>Created at { created_at } { updated_at && <span>( Updated at { updated_at } )</span> }</p>\n        <div className={ css.content }>{ content }</div>\n        <a href={ url }>Link to original</a>\n      </div>\n    </li>\n  ));\n\n  const loader = isLoading && <Loader />\n  const content = error\n    ? <h2>{ error.message }</h2>\n    : listReviews.length === 0\n      ? <h2>No reviews</h2>\n      : (\n        <ul className={ css.box }>\n          { listReviews }\n        </ul>\n      );\n\n  return (\n    <>\n      { loader }\n      { content }\n    </>\n  );\n};\n\nexport default Reviews;\n","function asyncGeneratorStep(gen, resolve, reject, _next, _throw, key, arg) {\n  try {\n    var info = gen[key](arg);\n    var value = info.value;\n  } catch (error) {\n    reject(error);\n    return;\n  }\n\n  if (info.done) {\n    resolve(value);\n  } else {\n    Promise.resolve(value).then(_next, _throw);\n  }\n}\n\nexport default function _asyncToGenerator(fn) {\n  return function () {\n    var self = this,\n        args = arguments;\n    return new Promise(function (resolve, reject) {\n      var gen = fn.apply(self, args);\n\n      function _next(value) {\n        asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"next\", value);\n      }\n\n      function _throw(err) {\n        asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"throw\", err);\n      }\n\n      _next(undefined);\n    });\n  };\n}","export default function _classPrivateFieldBase(receiver, privateKey) {\n  if (!Object.prototype.hasOwnProperty.call(receiver, privateKey)) {\n    throw new TypeError(\"attempted to use private field on non-instance\");\n  }\n\n  return receiver;\n}","var id = 0;\nexport default function _classPrivateFieldKey(name) {\n  return \"__private_\" + id++ + \"_\" + name;\n}","const BASE_URL = 'https://api.themoviedb.org/3';\nconst KEY_API = '221af12348c3ca060963c8b12f5995d3';\n\n\nconst formatDate = (dateString) => {\n  const months = [\n    'Jan',\n    'Feb',\n    'Mar',\n    'Apr',\n    'May',\n    'Jun',\n    'Jul',\n    'Aug',\n    'Sep',\n    'Oct',\n    'Nov',\n    'Dec',\n  ];\n\n  const date = new Date(dateString);\n\n  return `${months[date.getMonth()]} ${date.getDate()}, ${date.getFullYear()}`;\n};\n\nclass ApiService {\n  getResource = async (url) => {\n    const res = await fetch(`${BASE_URL}${url}api_key=${KEY_API}`);\n    return res.json();\n  }\n\n  getTrending = async (page=1) => {\n    const res = await this.getResource(`/trending/movie/day?page=${page}&`);\n    return this.#transformTrending(res);\n  }\n\n  #transformTrending({ results, total_results }) {\n    const transformedResults = results.map(({ id, title, poster_path, vote_average }) => ({\n      movieId: id,\n      title,\n      poster_path: poster_path ? 'https://image.tmdb.org/t/p/w500' + poster_path : '/goit-react-hw-05-movies/img/noimage.jpg',\n      vote_average: vote_average.toFixed(2),\n    }));\n\n    return {\n      results: transformedResults,\n      total_results\n    };\n  }\n\n  searchMovies = async (query, page=1) => {\n    const res = await this.getResource(`/search/movie?query=${query}&page=${page}&`);\n    return this.#transformTrending(res);\n  };\n\n  getMovieDetails = async (movieId) => {\n    const res = await this.getResource(`/movie/${movieId}?`);\n    return this.#transformMovieDetails(res);\n  };\n\n  #transformMovieDetails({\n    genres,\n    overview,\n    poster_path,\n    production_companies,\n    production_countries,\n    release_date,\n    title,\n    vote_average\n  }) {\n    return {\n      genres: genres.map(({name}) => name),\n      overview,\n      poster_path: poster_path ? 'https://image.tmdb.org/t/p/w500' + poster_path : 'goit-react-hw-05-movies/img/noimage.jpg',\n      production_companies: production_companies.map(({name}) => name),\n      production_countries: production_countries.map(({name}) => name),\n      release_date: formatDate(release_date),\n      title,\n      vote_average: vote_average.toFixed(2),\n    };\n  }\n\n  getMovieCredits = async (movieId) => {\n    const res = await this.getResource(`/movie/${movieId}/credits?`);\n    return this.#transformCredits(res);\n  }\n\n  #transformCredits({ cast }) {\n    return cast.map(({ character, name, profile_path, id }) => ({\n      id,\n      character,\n      name,\n      profile_path: profile_path\n        ? 'https://image.tmdb.org/t/p/w500' + profile_path\n        : '/goit-react-hw-05-movies/img/noimage.jpg',\n    }));\n  }\n\n  getMovieReviews = async (movieId, page=1) => {\n    const res = await this.getResource(`/movie/${movieId}/reviews?page=${page}&`);\n    return this.#transformMovieReviews(res);\n  }\n\n  #transformMovieReviews({ results }) {\n    return results.map(({ author, author_details: { avatar_path }, content, created_at, updated_at, url, id }) => {\n\n      const avatar = avatar_path\n        ? avatar_path.includes('http')\n          ? avatar_path.slice(1)\n          : 'https://image.tmdb.org/t/p/w500' + avatar_path\n        : '/goit-react-hw-05-movies/img/noimage.jpg';\n\n      return {\n        author,\n        avatar_path: avatar,\n        content,\n        created_at: formatDate(created_at),\n        updated_at: formatDate(updated_at),\n        url,\n        id\n      };\n    });\n  }\n}\n\nexport const apiService = new ApiService();\n"],"names":["useSearchParams","searchParams","useState","reviews","setReviews","isLoading","setIsLoading","error","setError","movieId","get","useEffect","apiService","then","res","catch","err","finally","listReviews","map","author","avatar_path","content","created_at","updated_at","url","id","className","css","src","alt","href","loader","message","length","asyncGeneratorStep","gen","resolve","reject","_next","_throw","key","arg","info","value","done","Promise","_asyncToGenerator","fn","self","this","args","arguments","apply","undefined","_classPrivateFieldBase","receiver","privateKey","Object","prototype","hasOwnProperty","call","TypeError","_classPrivateFieldKey","name","formatDate","dateString","date","Date","getMonth","getDate","getFullYear","ApiService","getResource","fetch","json","getTrending","page","searchMovies","query","getMovieDetails","getMovieCredits","getMovieReviews","results","total_results","transformedResults","title","poster_path","vote_average","toFixed","genres","overview","production_companies","production_countries","release_date","cast","character","profile_path","author_details","includes","slice"],"sourceRoot":""}