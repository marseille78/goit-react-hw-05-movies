{"version":3,"file":"static/js/824.be893b71.chunk.js","mappings":"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","sources":["webpack://react-homework-template/./src/pages/MovieDetails.module.css?6cd2","pages/MovieDetails.js","../node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js","../node_modules/@babel/runtime/helpers/esm/classPrivateFieldLooseBase.js","../node_modules/@babel/runtime/helpers/esm/classPrivateFieldLooseKey.js","services/api-service.js"],"sourcesContent":["// extracted by mini-css-extract-plugin\nexport default {\"box\":\"MovieDetails_box__G7Whn\",\"view\":\"MovieDetails_view__p8djP\",\"desc\":\"MovieDetails_desc__h+2F3\",\"details\":\"MovieDetails_details__-8Cxp\",\"dataList\":\"MovieDetails_dataList__VngzV\",\"linkBack\":\"MovieDetails_linkBack__DU74h\"};","import { useEffect, useState, Suspense, useRef } from 'react';\nimport { apiService } from '../services/api-service';\nimport { Link, Outlet, useLocation, useParams } from 'react-router-dom';\nimport Loader from '../components/Loader';\n\nimport css from './MovieDetails.module.css';\nimport Error from '../components/Error';\n\nconst MovieDetails = () => {\n\n  const { movieId } = useParams();\n\n  const [genres, setGenres] = useState([]);\n  const [title, setTitle] = useState('');\n  const [overview, setOverview] = useState('');\n  const [posterPath, setPosterPath] = useState('');\n  const [productionCompanies, setProductionCompanies] = useState([]);\n  const [productionCountries, setProductionCountries] = useState([]);\n  const [releaseDate, setReleaseDate] = useState('');\n  const [voteAverage, setVoteAverage] = useState('');\n  const [isLoading, setIsLoading] = useState(false);\n  const [error, setError] = useState(null);\n\n  const location = useLocation();\n\n  const backDetailsLocationRef = useRef(location.state?.from ?? '/');\n\n  useEffect(() => {\n    setIsLoading(true);\n    apiService.getMovieDetails(movieId)\n      .then(({\n        genres,\n        vote_average,\n        release_date,\n        production_countries,\n        production_companies,\n        poster_path,\n        overview,\n        title\n      }) => {\n        setGenres(genres);\n        setVoteAverage(vote_average);\n        setReleaseDate(release_date);\n        setProductionCountries(production_countries);\n        setProductionCompanies(production_companies);\n        setPosterPath(poster_path);\n        setOverview(overview);\n        setTitle(title);\n    })\n    .catch(err => {\n      clearState();\n      setError(err);\n    })\n    .finally(() => {\n      setIsLoading(false);\n    });\n  }, [movieId]);\n\n  const clearState = () => {\n    setGenres([]);\n    setTitle('');\n    setOverview('');\n    setPosterPath('');\n    setProductionCompanies([]);\n    setProductionCountries([]);\n    setReleaseDate('');\n    setVoteAverage('');\n  };\n\n  const DetailsBody = () => (\n    <div className={ css.box }>\n      <div className={ css.view }>\n        <img src={ posterPath } alt={ title } />\n      </div>\n      <div className=\"data\">\n        <Link to={ backDetailsLocationRef.current } className={ css.linkBack }>&lt; Go back</Link>\n        <h1>{ title }<span>{ voteAverage }</span></h1>\n        <p className={ css.desc }>{ overview }</p>\n        <ul className={ css.dataList }>\n          <li><strong>Genres</strong>: { genres.join(', ') }</li>\n          <li><strong>Companies</strong>: { productionCompanies.join(', ') }</li>\n          <li><strong>Countries</strong>: { productionCountries.join(', ') }</li>\n          <li><strong>Release</strong>: { releaseDate }</li>\n        </ul>\n        <hr/>\n        <ul className={ css.details }>\n          <li><Link to={ `cast?id=${movieId}` }>Actors</Link></li>\n          <li><Link to={ `reviews?id=${movieId}` }>Reviews</Link></li>\n        </ul>\n        <Suspense fallback={ <Loader /> }>\n          <Outlet />\n        </Suspense>\n      </div>\n    </div>\n  );\n\n  return (\n    <>\n      { isLoading && <Loader/> }\n      <div>\n        { error ? <Error>I'm sorry. Something happened wrong</Error> : <DetailsBody /> }\n      </div>\n    </>\n  );\n};\n\nexport default MovieDetails;\n","function asyncGeneratorStep(gen, resolve, reject, _next, _throw, key, arg) {\n  try {\n    var info = gen[key](arg);\n    var value = info.value;\n  } catch (error) {\n    reject(error);\n    return;\n  }\n\n  if (info.done) {\n    resolve(value);\n  } else {\n    Promise.resolve(value).then(_next, _throw);\n  }\n}\n\nexport default function _asyncToGenerator(fn) {\n  return function () {\n    var self = this,\n        args = arguments;\n    return new Promise(function (resolve, reject) {\n      var gen = fn.apply(self, args);\n\n      function _next(value) {\n        asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"next\", value);\n      }\n\n      function _throw(err) {\n        asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"throw\", err);\n      }\n\n      _next(undefined);\n    });\n  };\n}","export default function _classPrivateFieldBase(receiver, privateKey) {\n  if (!Object.prototype.hasOwnProperty.call(receiver, privateKey)) {\n    throw new TypeError(\"attempted to use private field on non-instance\");\n  }\n\n  return receiver;\n}","var id = 0;\nexport default function _classPrivateFieldKey(name) {\n  return \"__private_\" + id++ + \"_\" + name;\n}","const BASE_URL = 'https://api.themoviedb.org/3';\nconst KEY_API = '221af12348c3ca060963c8b12f5995d3';\n\n\nconst formatDate = (dateString) => {\n  const months = [\n    'Jan',\n    'Feb',\n    'Mar',\n    'Apr',\n    'May',\n    'Jun',\n    'Jul',\n    'Aug',\n    'Sep',\n    'Oct',\n    'Nov',\n    'Dec',\n  ];\n\n  const date = new Date(dateString);\n\n  return `${months[date.getMonth()]} ${date.getDate()}, ${date.getFullYear()}`;\n};\n\nclass ApiService {\n  getResource = async (url) => {\n    const res = await fetch(`${BASE_URL}${url}api_key=${KEY_API}`);\n    return res.json();\n  }\n\n  getTrending = async (page=1) => {\n    const res = await this.getResource(`/trending/movie/day?page=${page}&`);\n    return this.#transformTrending(res);\n  }\n\n  #transformTrending({ results, total_results }) {\n    const transformedResults = results.map(({ id, title, poster_path, vote_average }) => ({\n      movieId: id,\n      title,\n      poster_path: poster_path ? 'https://image.tmdb.org/t/p/w500' + poster_path : '/goit-react-hw-05-movies/img/noimage.jpg',\n      vote_average: vote_average.toFixed(2),\n    }));\n\n    return {\n      results: transformedResults,\n      total_results\n    };\n  }\n\n  searchMovies = async (query, page=1) => {\n    const res = await this.getResource(`/search/movie?query=${query}&page=${page}&`);\n    return this.#transformTrending(res);\n  };\n\n  getMovieDetails = async (movieId) => {\n    const res = await this.getResource(`/movie/${movieId}?`);\n    return this.#transformMovieDetails(res);\n  };\n\n  #transformMovieDetails({\n    genres,\n    overview,\n    poster_path,\n    production_companies,\n    production_countries,\n    release_date,\n    title,\n    vote_average\n  }) {\n    return {\n      genres: genres.map(({name}) => name),\n      overview,\n      poster_path: poster_path ? 'https://image.tmdb.org/t/p/w500' + poster_path : 'goit-react-hw-05-movies/img/noimage.jpg',\n      production_companies: production_companies.map(({name}) => name),\n      production_countries: production_countries.map(({name}) => name),\n      release_date: formatDate(release_date),\n      title,\n      vote_average: vote_average.toFixed(2),\n    };\n  }\n\n  getMovieCredits = async (movieId) => {\n    const res = await this.getResource(`/movie/${movieId}/credits?`);\n    return this.#transformCredits(res);\n  }\n\n  #transformCredits({ cast }) {\n    return cast.map(({ character, name, profile_path, id }) => ({\n      id,\n      character,\n      name,\n      profile_path: profile_path\n        ? 'https://image.tmdb.org/t/p/w500' + profile_path\n        : '/goit-react-hw-05-movies/img/noimage.jpg',\n    }));\n  }\n\n  getMovieReviews = async (movieId, page=1) => {\n    const res = await this.getResource(`/movie/${movieId}/reviews?page=${page}&`);\n    return this.#transformMovieReviews(res);\n  }\n\n  #transformMovieReviews({ results }) {\n    return results.map(({ author, author_details: { avatar_path }, content, created_at, updated_at, url, id }) => {\n\n      const avatar = avatar_path\n        ? avatar_path.includes('http')\n          ? avatar_path.slice(1)\n          : 'https://image.tmdb.org/t/p/w500' + avatar_path\n        : '/goit-react-hw-05-movies/img/noimage.jpg';\n\n      return {\n        author,\n        avatar_path: avatar,\n        content,\n        created_at: formatDate(created_at),\n        updated_at: formatDate(updated_at),\n        url,\n        id\n      };\n    });\n  }\n}\n\nexport const apiService = new ApiService();\n"],"names":["movieId","useParams","useState","genres","setGenres","title","setTitle","overview","setOverview","posterPath","setPosterPath","productionCompanies","setProductionCompanies","productionCountries","setProductionCountries","releaseDate","setReleaseDate","voteAverage","setVoteAverage","isLoading","setIsLoading","error","setError","location","useLocation","backDetailsLocationRef","useRef","state","from","useEffect","apiService","then","vote_average","release_date","production_countries","production_companies","poster_path","catch","err","clearState","finally","DetailsBody","className","css","src","alt","to","current","join","Suspense","fallback","Loader","Error","asyncGeneratorStep","gen","resolve","reject","_next","_throw","key","arg","info","value","done","Promise","_asyncToGenerator","fn","self","this","args","arguments","apply","undefined","_classPrivateFieldBase","receiver","privateKey","Object","prototype","hasOwnProperty","call","TypeError","id","_classPrivateFieldKey","name","formatDate","dateString","date","Date","getMonth","getDate","getFullYear","ApiService","getResource","url","fetch","res","json","getTrending","page","searchMovies","query","getMovieDetails","getMovieCredits","getMovieReviews","results","total_results","transformedResults","map","toFixed","cast","character","profile_path","author","avatar_path","author_details","content","created_at","updated_at","includes","slice"],"sourceRoot":""}